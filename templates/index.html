{% extends "base.html" %}

{% block title %}Live Feed & Capture{% endblock %}

{% block content %}
<div class="row">
    <div class="col-lg-8">
        <div class="card">
            <div class="card-header">
                <h2>Live Camera Feed</h2>
            </div>
            <div class="card-body">
                <div style="position: relative; width: 100%; max-width: 640px; margin: auto;">
                    <video id="video" class="img-fluid" autoplay muted></video>
                    <canvas id="overlay-canvas" style="position: absolute; top: 0; left: 0;"></canvas>
                </div>
            </div>
        </div>
    </div>

    <div class="col-lg-4">
        <div class="card">
            <div class="card-header">
                <h2>Enroll New Person</h2>
            </div>
            <div class="card-body">
                <div class="mb-3">
                    <label for="person-name" class="form-label">Enter Name:</label>
                    <input type="text" id="person-name" class="form-control" placeholder="e.g., Albert Einstein">
                </div>
                <button id="capture-btn" class="btn btn-primary w-100">Capture & Add Person</button>
                <div id="status-message" class="mt-3"></div>
            </div>
        </div>
        <div class="card mt-4">
            <div class="card-header">
                <h2>System Logs</h2>
            </div>
            <div class="card-body" id="system-logs" style="max-height: 200px; overflow-y: auto;">
            </div>
        </div>
    </div>
</div>

<canvas id="canvas" style="display:none;"></canvas>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/main.js') }}"></script>
{% endblock %}